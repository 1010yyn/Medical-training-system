(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17aa72b3"],{"021c":function(t,e,n){(function(e,n){t.exports=n()})(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=18)}([function(t){t.exports=JSON.parse('{"zh_cn":{"wait":"请稍后…","recording":"好，请讲…","say_nothing":"您好像没说什么","not_supported":"无法录音：未找到录音设备、当前浏览器不支持录音或用户未授权！","socket_error":"WebSocket连接失败","access_microphone_failed":"请求麦克风失败","missing_configuration":"缺少 appId、apiKey、apiSecret 配置"},"en_us":{"wait":"Please wait…","recording":"Recording…","say_nothing":"You don\'t seem to say anything","not_supported":"Unable to record: No recording device was found, the current browser does not support recording, or the user is not authorized!","socket_error":"socket connect failed","access_microphone_failed":"access microphone failed","missing_configuration":"Missing appId, apiKey and apiSecret configuration"}}')},function(t,e,n){"use strict";function r(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"===typeof btoa){var o=i(r),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")}));return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}function i(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=r(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"===typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var a=0;a<t.length;a++){var s=t[a];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),e.push(s))}},e}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],l={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return d}));var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,u=0,c=!1,l=function(){},f=null,h="data-vue-ssr-id",p="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(t,e,n,i){c=n,f=i||{};var a=r(t,e);return g(a),function(e){for(var n=[],i=0;i<a.length;i++){var s=a[i],u=o[s.id];u.refs--,n.push(u)}e?(a=r(t,e),g(a)):a=[];for(i=0;i<n.length;i++){u=n[i];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}}function g(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(y(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(y(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+h+'~="'+t.id+'"]');if(r){if(c)return l;r.parentNode.removeChild(r)}if(p){var i=u++;r=s||(s=v()),e=w.bind(null,r,i,!1),n=w.bind(null,r,i,!0)}else r=v(),e=b.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function b(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),f.ssrId&&t.setAttribute(h,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e,n){var r=n(9);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n(2).default;i("675c8002",r,!0,{})},function(t,e,n){var r=n(11);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n(2).default;i("c049f1e4",r,!0,{})},function(t,e,n){var r=n(13);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n(2).default;i("1d35c9f5",r,!0,{})},function(t,e,n){var r=n(15);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n(2).default;i("20e6e7d0",r,!0,{})},function(t,e,n){var r=n(17);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n(2).default;i("31c275e3",r,!0,{})},function(t,e,n){"use strict";var r=n(3),i=n.n(r);i.a},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".loader[data-v-2ceebd6a]{width:20px;height:20px;margin:auto}\n",""])},function(t,e,n){"use strict";var r=n(4),i=n.n(r);i.a},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".recording[data-v-7e985a13]{width:20px;height:20px;margin:auto}\n",""])},function(t,e,n){"use strict";var r=n(5),i=n.n(r);i.a},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".microphone[data-v-8ef35f0c]{display:block;width:32px;height:32px;margin:auto;text-decoration:none}\n",""])},function(t,e,n){"use strict";var r=n(6),i=n.n(r);i.a},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,'.recording-tip[data-v-397c871f]{position:absolute;width:auto;max-width:270px;display:flex;justify-content:flex-end;white-space:nowrap;padding:0;border-radius:3px;pointer-events:none;border-width:2px 15px 3px;border-style:solid}.recording-tip[data-v-397c871f]:before{position:absolute;margin:auto;content:" ";width:14px;height:14px;background-color:inherit}.recording-tip.top[data-v-397c871f]{bottom:calc(100% + 5px);left:50%;transform:translate3d(-50%, 0, 0)}.recording-tip.top[data-v-397c871f]:before{bottom:-7px;left:0;right:0;clip-path:polygon(0% 50%, 50% 100%, 100% 50%)}.recording-tip.right[data-v-397c871f]{left:calc(100% + 5px);top:50%;transform:translate3d(0, -50%, 0)}.recording-tip.right[data-v-397c871f]:before{left:-21px;top:0;bottom:0;clip-path:polygon(0% 50%, 50% 100%, 50% 0%)}.recording-tip.bottom[data-v-397c871f]{top:calc(100% + 5px);left:50%;transform:translate3d(-50%, 0, 0)}.recording-tip.bottom[data-v-397c871f]:before{top:-7px;left:0;right:0;clip-path:polygon(0% 50%, 50% 0%, 100% 50%)}.recording-tip.left[data-v-397c871f]{right:calc(100% + 5px);top:50%;transform:translate3d(0, -50%, 0)}.recording-tip.left[data-v-397c871f]:before{right:-21px;top:0;bottom:0;clip-path:polygon(100% 50%, 50% 100%, 50% 0%)}\n',""])},function(t,e,n){"use strict";var r=n(7),i=n.n(r);i.a},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".voice-input-button[data-v-7b28397d]{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:.5}.voice-input-button.ready[data-v-7b28397d]{opacity:1}.voice-input-button .record-btn[data-v-7b28397d]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;cursor:pointer}.voice-input-button .record-btn.disabled[data-v-7b28397d]{pointer-events:none;cursor:not-allowed}.voice-input-button .record-btn>*[data-v-7b28397d]{pointer-events:none}.loader[data-v-7b28397d]{display:inline-block;margin:0 5px}.pop[data-v-7b28397d]{position:fixed;top:0;bottom:0;left:0;right:0;margin:auto;width:40%;height:100px;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,0.5);pointer-events:none;opacity:0;transition:opacity .1s}.pop.recording[data-v-7b28397d]{opacity:1}.fade-enter-active[data-v-7b28397d],.fade-leave-active[data-v-7b28397d]{transition:opacity .3s}.fade-enter[data-v-7b28397d],.fade-leave-to[data-v-7b28397d]{opacity:0}\n",""])},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voice-input-button",class:{active:t.recording,ready:t.isAudioAvailable}},[n("div",{staticClass:"record-btn",on:{contextmenu:t.menuPop,mousedown:function(e){t.pressMode?t.start(e):t.toggle(e)},mouseup:function(e){t.pressMode&&t.stop(e)},mouseleave:function(e){t.pressMode&&t.stop(e)},touchstart:function(e){t.pressMode?t.start(e):t.toggle(e)},touchend:function(e){t.pressMode&&t.stop(e)},touchleave:function(e){t.pressMode&&t.stop(e)}}},[t.recording?"ing"===t.state||t.responding||t.result?n("recording-icon",{attrs:{color:t.getConfig("color")}}):n("loading",{attrs:{color:t.getConfig("color")}}):n("microphone",{attrs:{color:t.getConfig("color")}}),t._v(" "),n("transition",{attrs:{name:"fade"}},["ing"===t.state||"init"===t.state||t.responding||t.result||t.blank?n("recording-tip",{attrs:{position:t.getConfig("tipPosition"),tipTextColor:t.getConfig("tipTextColor"),tipBackgroundColor:t.getConfig("tipBackgroundColor"),tipShadowColor:t.getConfig("tipShadowColor")}},["ing"===t.state||t.responding||t.result?t._t("recording",[t._v(t._s(t.result||t.locale.recording))]):t._e(),t._v(" "),"init"===t.state?t._t("wait",[t._v(t._s(t.locale.wait))]):t._e(),t._v(" "),t.blank?t._t("no-speak",[t._v(t._s(t.locale.say_nothing))]):t._e()],2):t._e()],1)],1)])},i=[],o=o||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new a.init(n,e)}}),s=n.enc={},u=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(n){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o);s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0);if(e=s*o,i=t.min(4*e,i),e){for(var u=0;u<e;u+=o)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=i}return new a.init(u,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);(function(t){for(var e=o,n=e.lib,r=n.WordArray,i=n.Hasher,a=(n=e.algo,[]),s=[],u=function(t){return 4294967296*(t-(0|t))|0},c=2,l=0;64>l;){var f;t:{f=c;for(var h=t.sqrt(f),p=2;p<=h;p++)if(!(f%p)){f=!1;break t}f=!0}f&&(8>l&&(a[l]=u(t.pow(c,.5))),s[l]=u(t.pow(c,1/3)),l++),c++}var d=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)d[h]=0|t[e+h];else{var p=d[h-15],g=d[h-2];d[h]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[h-16]}p=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[h]+d[h],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=c,c=u,u=a+p|0,a=o,o=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)})(Math),function(){var t=o,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,u=a.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}();var a=o;(function(){var t=a,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<n;a++)t.push(r.charAt(o>>>6*(3-a)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(n=i));i=[];for(var o=0,a=0;a<n;a++)if(a%4){var s=r.indexOf(t.charAt(a-1))<<a%4*2,u=r.indexOf(t.charAt(a))>>>6-a%4*2;i[o>>>2]|=(s|u)<<24-o%4*8,o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();var s=function(){var t=this;this.onmessage=function(t){switch(t.data.command){case"transform":e.transaction(t.data.buffer);break}};var e={transaction:function(n){var r=e.to16kHz(n),i=e.to16BitPCM(r);t.postMessage({buffer:i})},to16kHz:function(t){var e=new Float32Array(t),n=Math.round(e.length*(16e3/44100)),r=new Float32Array(n),i=(e.length-1)/(n-1);r[0]=e[0];for(var o=1;o<n-1;o++){var a=o*i,s=Math.floor(a).toFixed(),u=Math.ceil(a).toFixed(),c=a-s;r[o]=e[s]+(e[u]-e[s])*c}return r[n-1]=e[e.length-1],r},to16BitPCM:function(t){for(var e=2*t.length,n=new ArrayBuffer(e),r=new DataView(n),i=0,o=0;o<t.length;o++,i+=2){var a=Math.max(-1,Math.min(1,t[o]));r.setInt16(i,a<0?32768*a:32767*a,!0)}return Array.from(new Int8Array(r.buffer))},toBase64:function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}}},u=s,c=function(t){var e=t.toString();e=e.substr(e.indexOf("{")+1),e=e.substr(0,e.lastIndexOf("}"));var n=new Blob([e]),r=URL.createObjectURL(n),i=new Worker(r);return URL.revokeObjectURL(r),i},l=c,f=n(0),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var g=l(u),v=[],y=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,g.onmessage=function(t){v.push.apply(v,d(t.data.buffer))};var m=function(){function t(e){p(this,t),this.config=e,this.state="end",this.language=e.language||"zh_cn",this.accent=e.accent||"mandarin",this.appId=e.appId,this.apiKey=e.apiKey,this.apiSecret=e.apiSecret,this.isAudioAvailable=!(!navigator.getUserMedia&&!navigator.mediaDevices.getUserMedia||!y||!g),this.pd=e.pd,this.rlang=e.rlang,this.ptt=e.ptt,this.nunum=e.nunum,this.vad_eos=e.vad_eos}return h(t,[{key:"closeTrack",value:function t(){try{this.recorder&&(this.recorder.disconnect(),this.recorder=null),this.mediaStream&&(this.recorder&&this.recorder.context&&this.mediaStream.disconnect(this.recorder),this.mediaStream.mediaStream.getTracks().forEach((function(t){t.stop()})))}catch(t){console.warn(t.message)}}},{key:"initRecorder",value:function(){var t=this;if("end"!==this.state){if(!this.context){var e=new y;this.context=e}this.recorder=this.context.createScriptProcessor(0,1,1);var n=function(e){if("end"!==t.state){var n=t.context.createMediaStreamSource(e);t.mediaStream=n,t.recorder&&(t.recorder.onaudioprocess=function(e){"end"!==t.state?t.sendData(e.inputBuffer.getChannelData(0)):t.closeTrack()}),t.connectWebsocket()}else t.closeTrack()},r=function(e){t.recorder=null,t.mediaStream=null,t.context=null,console.warn(e.message||f[t.language].access_microphone_failed)};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){n(t)})).catch((function(t){r(t)})):navigator.getUserMedia({audio:!0,video:!1},(function(t){n(t)}),(function(t){r(t)}))}}},{key:"start",value:function(){var t=this;if(navigator.getUserMedia&&y)if(this.state="init",this.recorder){if("end"===this.state)return void this.closeTrack();this.connectWebsocket()}else setTimeout((function(){t.initRecorder()}),100);else if(navigator.mediaDevices.getUserMedia&&y)if(this.state="init",this.recorder){if("end"===this.state)return void this.closeTrack();this.connectWebsocket()}else setTimeout((function(){t.initRecorder()}),100);else alert(f[this.language].not_supported)}},{key:"stop",value:function(){this.state="end"}},{key:"sendData",value:function(t){g.postMessage({command:"transform",buffer:t})}},{key:"connectWebsocket",value:function(){var t=this,e="wss://iat-api.xfyun.cn/v2/iat",n="iat-api.xfyun.cn",r=this.apiKey,i=this.apiSecret,o=(new Date).toGMTString(),s="hmac-sha256",u="host date request-line",c="host: "+n+"\ndate: "+o+"\nGET /v2/iat HTTP/1.1",l=a.HmacSHA256(c,i),h=a.enc.Base64.stringify(l),p='api_key="'+r+'", algorithm="'+s+'", headers="'+u+'", signature="'+h+'"',d=btoa(p),g=e+"?authorization="+d+"&date="+o+"&host="+n;if("WebSocket"in window)this.ws=new WebSocket(g);else{if(!("MozWebSocket"in window))return alert(f[this.language].not_supported),null;this.ws=new MozWebSocket(g)}this.ws.onopen=function(e){t.mediaStream&&t.recorder&&(t.mediaStream.connect(t.recorder),t.recorder.connect(t.context.destination),t.state="ready",setTimeout((function(){t.wsOpened(e)}),100),t.config.onStart&&t.config.onStart(e))},this.ws.onmessage=function(e){t.config.onMessage&&t.config.onMessage(e),t.wsOnMessage(e)},this.ws.onerror=function(e){t.stop(),t.config.onError&&t.config.onError(e)},this.ws.onclose=function(e){t.stop(),t.config.onClose&&t.config.onClose(e)}}},{key:"wsOpened",value:function(){var t=this;if(1===this.ws.readyState){this.state="ing";var e=v.splice(0,1280),n={common:{app_id:this.appId},business:{language:this.language,domain:"iat",accent:this.accent,vad_eos:this.vad_eos,dwa:"wpgs",pd:this.pd,rlang:this.rlang,ptt:this.ptt,nunum:this.nunum},data:{status:0,format:"audio/L16;rate=16000",encoding:"raw",audio:this.ArrayBufferToBase64(e)}};this.ws.send(JSON.stringify(n)),this.handlerInterval=setInterval((function(){if(1===t.ws.readyState){if(0===v.length)return"end"===t.state&&(t.ws.send(JSON.stringify({data:{status:2,format:"audio/L16;rate=16000",encoding:"raw",audio:""}})),clearInterval(t.handlerInterval)),!1;var e=v.splice(0,1280);t.ws.send(JSON.stringify({data:{status:1,format:"audio/L16;rate=16000",encoding:"raw",audio:t.ArrayBufferToBase64(e)}}))}else clearInterval(t.handlerInterval)}),40)}}},{key:"wsOnMessage",value:function(t){var e=JSON.parse(t.data);0===e.code&&2===e.data.status&&this.ws.close(),0!==e.code&&(this.ws.close(),console.log(e.code+":"+e.message))}},{key:"ArrayBufferToBase64",value:function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}}]),t}(),w=m,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader",attrs:{title:"loading…"}},[n("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 20 20","xml:space":"preserve"}},[n("rect",{attrs:{x:"0",y:"0",width:"4",height:"20",fill:t.color}},[n("animate",{attrs:{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),t._v(" "),n("rect",{attrs:{x:"7",y:"0",width:"4",height:"20",fill:t.color}},[n("animate",{attrs:{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"}})]),t._v(" "),n("rect",{attrs:{x:"14",y:"0",width:"4",height:"20",fill:t.color}},[n("animate",{attrs:{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"}})])])])},x=[],S={name:"loading",props:{color:{type:String,default:"#333"}}},_=S;n(8);function C(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}var A=C(_,b,x,!1,null,"2ceebd6a",null),k=A.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recording",attrs:{title:"recording…"}},[n("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 20 20","xml:space":"preserve"}},[n("rect",{attrs:{x:"0",y:"8",width:"4",height:"4",fill:t.color}},[n("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"4;20;4",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}}),t._v(" "),n("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"8; 0; 8",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),t._v(" "),n("rect",{attrs:{x:"7",y:"8",width:"4",height:"4",fill:t.color}},[n("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"4;20;4",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}}),t._v(" "),n("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"8; 0; 8",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}})]),t._v(" "),n("rect",{attrs:{x:"14",y:"8",width:"4",height:"4",fill:t.color}},[n("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"4;20;4",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}}),t._v(" "),n("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"8; 0; 8",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}})])])])},R=[],B={name:"recording-icon",props:{color:{type:String,default:"#333"}}},U=B,P=(n(10),C(U,M,R,!1,null,"7e985a13",null)),L=P.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"microphone"},[n("svg",{staticClass:"icon",attrs:{t:"1543917784414",fill:t.color,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2028","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32"}},[n("path",{attrs:{d:"M512 608 512 608c88 0 160-72 160-160L672 256c0-88-72-160-160-160l0 0c-88 0-160 72-160 160l0 192C352 536 424 608 512 608zM796.6 492.4c2.7-17.5-9.2-33.8-26.7-36.5-17.5-2.6-33.8 9.3-36.5 26.7C716.6 590.6 621.5 672 512 672c-109.5 0-204.7-81.5-221.4-189.5-2.7-17.5-19.1-29.4-36.5-26.7-17.5 2.7-29.4 19-26.7 36.5 20.2 130.5 124 227.8 252.6 241.8L480 832l-96 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0 0-97.9C672.5 720.1 776.4 622.9 796.6 492.4z","p-id":"2029"}})])])},I=[],O={name:"microphone",props:{color:{type:String,default:"#333"}}},j=O,E=(n(12),C(j,T,I,!1,null,"8ef35f0c",null)),D=E.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recording-tip",class:t.position,style:"\n    background-color: "+t.tipBackgroundColor+";\n    border-color: "+t.tipBackgroundColor+";\n    color: "+t.tipTextColor+";\n    box-shadow: "+t.tipShadowColor+" 0 2px 2px;\n  "},[t._t("default")],2)},N=[],q={name:"recording-tip",props:{position:String,tipTextColor:String,tipBackgroundColor:String,tipShadowColor:String}},F=q,W=(n(14),C(F,z,N,!1,null,"397c871f",null)),$=W.exports,V={color:"#333",tipPosition:"top",tipTextColor:"#f2f2f2",tipBackgroundColor:"#4b667d",tipShadowColor:"rgba(0,0,0,.1)",interactiveMode:"press",returnMode:"increment",language:"zh_cn",vad_eos:3e3},H={props:{color:String,tipPosition:String,appId:String,apiKey:String,apiSecret:String,interactiveMode:String,returnMode:String,language:String,accent:String,pd:String,rlang:String,ptt:Number,nunum:Number,vad_eos:Number},methods:{getConfig:function(t){return this.IATConfig||(this.IATConfig={}),this[t]||this.IATConfig[t]||V[t]}},computed:{pressMode:function(){return"touch"!==this.getConfig("interactiveMode")},touchMode:function(){return"touch"===this.getConfig("interactiveMode")},incrementMode:function(){return"increment"===this.getConfig("returnMode")},completeMode:function(){return"complete"===this.getConfig("returnMode")},locale:function(){var t=f[this.getConfig("language")];return t}}},K=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(t){i=!0,o=t}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),J=function(t,e){Object.defineProperty(t,e,{configurable:!1})},X=[],G={name:"voice-input-button",mixins:[H],components:{loading:k,recordingIcon:L,microphone:D,recordingTip:$},data:function(){return{recorder:null,processing:!1,recording:!1,inputTarget:null,isAudioAvailable:!1,blank:!1,resultCache:{},result:"",responding:!1}},methods:{menuPop:function(){return window.event.returnValue=!1,!1},toggle:function(t){this.recording?this.stop(t):this.start(t)},start:function(t){if(t.cancelable&&t.preventDefault(),!(this.recording||t&&"mousedown"===t.type&&1!==t.which)){if(!this.isAudioAvailable){var e=this.getConfig;return e("appId")&&e("apiKey")&&e("apiSecret")?void alert(this.locale.not_supported):void alert(this.locale.missing_configuration)}this.reset(),this.recording=!0,this.recorder.start(),this.$emit("record-start")}},stop:function(t){t&&t.cancelable&&t.preventDefault(),t&&"mousedown"===t.type&&1!==t.which||(this.recording=!1,this.recorder&&this.recorder.stop(),this.$emit("record-stop"),this.processing=!0)},reset:function(){var t=this;X.splice(0),this.resultCache={},this.responding=!1,setTimeout((function(){t.result=""}),500)},appendResult:function(t,e){this.resultCache[e]={text:t}},replaceResult:function(t,e,n,r){this.appendResult(t,e);for(var i=this.resultCache,o=n;o<=r;o++)i[o].discarded=!0},getResult:function(){return Object.values(this.resultCache).filter((function(t){return!t.discarded})).map((function(t){return t.text})).join("")},setResult:function(t){var e=this;this.responding=!0;for(var n="",r=t.ws,i=0;i<r.length;i++)n+=r[i].cw[0].w;var o=t.pgs,a=t.sn,s=t.ls;if(o)if("apd"===o)this.appendResult(n,a);else{var u=K(t.rg,2),c=u[0],l=u[1];this.replaceResult(n,a,c,l)}else this.appendResult(n,a);var f=this.getResult();this.result=f,this.completeMode&&!s||(s&&this.reset(),f?(this.$emit("record",f),this.$emit("input",f),s&&this.$emit("record-complete",f)):(this.$emit("record-blank"),this.blank=!0,setTimeout((function(){e.blank=!1}),1e3)))}},computed:{state:function(){return this.recorder?this.recorder.state:"end"}},created:function(){var t=this,e=this.getConfig,n=new w({onClose:function(){t.stop(),t.processing=!1},onError:function(){t.stop(),t.reset(),t.processing=!1,t.$emit("record-failed",error),alert(t.locale.socket_error)},onMessage:function(e){var n=JSON.parse(e.data);n.data&&n.data.result&&t.setResult(n.data.result)},onStart:function(){},appId:e("appId"),apiKey:e("apiKey"),apiSecret:e("apiSecret"),accent:e("accent"),language:e("language"),pd:e("pd"),rlang:e("rlang"),ptt:e("ptt"),nunum:e("nunum"),vad_eos:e("vad_eos")}),r=["appId","apiSecret","apiKey","accent","language","pd","rlang","ptt","nunum","vad_eos","config"];r.forEach((function(t){J(n,t)})),this.recorder=n,this.isAudioAvailable=this.recorder.isAudioAvailable&&e("appId")&&e("apiKey")&&e("apiSecret")},beforeDestroy:function(){this.recorder.stop(),this.recorder=null}},Z=G,Y=(n(16),C(Z,r,i,!1,null,"7b28397d",null)),Q=Y.exports;Q.install=function(t,e){t.prototype.IATConfig=e,t.component(Q.name,Q)},"undefined"!==typeof window&&window.Vue&&window.Vue.use(Q);e["default"]=Q}])}))},"0d3b":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("c430"),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"2b3d":function(t,e,n){"use strict";n("3ca3");var r,i=n("23e7"),o=n("83ab"),a=n("0d3b"),s=n("da84"),u=n("37e8"),c=n("6eeb"),l=n("19aa"),f=n("5135"),h=n("60da"),p=n("4df4"),d=n("6547").codeAt,g=n("5fb2"),v=n("d44e"),y=n("9861"),m=n("69f3"),w=s.URL,b=y.URLSearchParams,x=y.getState,S=m.set,_=m.getterFor("URL"),C=Math.floor,A=Math.pow,k="Invalid authority",M="Invalid scheme",R="Invalid host",B="Invalid port",U=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,L=/\d/,T=/^(0x|0X)/,I=/^[0-7]+$/,O=/^\d+$/,j=/^[\dA-Fa-f]+$/,E=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,D=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,q=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return R;if(n=W(e.slice(1,-1)),!n)return R;t.host=n}else if(Y(t)){if(e=g(e),E.test(e))return R;if(n=F(e),null===n)return R;t.host=n}else{if(D.test(e))return R;for(n="",r=p(e),i=0;i<r.length;i++)n+=G(r[i],H);t.host=n}},F=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),e=u.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=u[r],""==i)return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=T.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?O:8==o?I:j).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=A(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*A(256,3-r);return s},W=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return t.charAt(f)};if(":"==h()){if(":"!=t.charAt(1))return;f+=2,c++,l=c}while(h()){if(8==c)return;if(":"!=h()){e=n=0;while(n<4&&j.test(h()))e=16*e+parseInt(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;r=0;while(h()){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!L.test(h()))return;while(L.test(h())){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},$=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e},V=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=C(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=$(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},H={},K=h({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),J=h({},K,{"#":1,"?":1,"{":1,"}":1}),X=h({},J,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),G=function(t,e){var n=d(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y=function(t){return f(Z,t.scheme)},Q=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&U.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},rt=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},it=function(t){return"."===t||"%2e"===t.toLowerCase()},ot=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},st={},ut={},ct={},lt={},ft={},ht={},pt={},dt={},gt={},vt={},yt={},mt={},wt={},bt={},xt={},St={},_t={},Ct={},At={},kt={},Mt=function(t,e,n,i){var o,a,s,u,c=n||at,l=0,h="",d=!1,g=!1,v=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(z,"")),e=e.replace(N,""),o=p(e);while(l<=o.length){switch(a=o[l],c){case at:if(!a||!U.test(a)){if(n)return M;c=ut;continue}h+=a.toLowerCase(),c=st;break;case st:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(n)return M;h="",c=ut,l=0;continue}if(n&&(Y(t)!=f(Z,h)||"file"==h&&(Q(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(Y(t)&&Z[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?c=wt:Y(t)&&i&&i.scheme==t.scheme?c=ct:Y(t)?c=pt:"/"==o[l+1]?(c=lt,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=Ct)}break;case ut:if(!i||i.cannotBeABaseURL&&"#"!=a)return M;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=kt;break}c="file"==i.scheme?wt:ft;continue;case ct:if("/"!=a||"/"!=o[l+1]){c=ft;continue}c=dt,l++;break;case lt:if("/"==a){c=gt;break}c=_t;continue;case ft:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&Y(t))c=ht;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=At;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=_t;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=kt}break;case ht:if(!Y(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=_t;continue}c=gt}else c=dt;break;case pt:if(c=dt,"/"!=a||"/"!=h.charAt(l+1))continue;l++;break;case dt:if("/"!=a&&"\\"!=a){c=gt;continue}break;case gt:if("@"==a){d&&(h="%40"+h),d=!0,s=p(h);for(var y=0;y<s.length;y++){var m=s[y];if(":"!=m||v){var w=G(m,X);v?t.password+=w:t.username+=w}else v=!0}h=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(t)){if(d&&""==h)return k;l-=p(h).length+1,h="",c=vt}else h+=a;break;case vt:case yt:if(n&&"file"==t.scheme){c=xt;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(t)){if(Y(t)&&""==h)return R;if(n&&""==h&&(Q(t)||null!==t.port))return;if(u=q(t,h),u)return u;if(h="",c=St,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),h+=a}else{if(""==h)return R;if(u=q(t,h),u)return u;if(h="",c=mt,n==yt)return}break;case mt:if(!L.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(t)||n){if(""!=h){var b=parseInt(h,10);if(b>65535)return B;t.port=Y(t)&&b===Z[t.scheme]?null:b,h=""}if(n)return;c=St;continue}return B}h+=a;break;case wt:if(t.scheme="file","/"==a||"\\"==a)c=bt;else{if(!i||"file"!=i.scheme){c=_t;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",c=At;else{if("#"!=a){nt(o.slice(l).join(""))||(t.host=i.host,t.path=i.path.slice(),rt(t)),c=_t;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=kt}}break;case bt:if("/"==a||"\\"==a){c=xt;break}i&&"file"==i.scheme&&!nt(o.slice(l).join(""))&&(et(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=_t;continue;case xt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&et(h))c=_t;else if(""==h){if(t.host="",n)return;c=St}else{if(u=q(t,h),u)return u;if("localhost"==t.host&&(t.host=""),n)return;h="",c=St}continue}h+=a;break;case St:if(Y(t)){if(c=_t,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(c=_t,"/"!=a))continue}else t.fragment="",c=kt;else t.query="",c=At;break;case _t:if(a==r||"/"==a||"\\"==a&&Y(t)||!n&&("?"==a||"#"==a)){if(ot(h)?(rt(t),"/"==a||"\\"==a&&Y(t)||t.path.push("")):it(h)?"/"==a||"\\"==a&&Y(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(a==r||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=At):"#"==a&&(t.fragment="",c=kt)}else h+=G(a,J);break;case Ct:"?"==a?(t.query="",c=At):"#"==a?(t.fragment="",c=kt):a!=r&&(t.path[0]+=G(a,H));break;case At:n||"#"!=a?a!=r&&("'"==a&&Y(t)?t.query+="%27":t.query+="#"==a?"%23":G(a,H)):(t.fragment="",c=kt);break;case kt:a!=r&&(t.fragment+=G(a,K));break}l++}},Rt=function(t){var e,n,r=l(this,Rt,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=S(r,{type:"URL"});if(void 0!==i)if(i instanceof Rt)e=_(i);else if(n=Mt(e={},String(i)),n)throw TypeError(n);if(n=Mt(s,a,null,e),n)throw TypeError(n);var u=s.searchParams=new b,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Ut.call(r),r.origin=Pt.call(r),r.protocol=Lt.call(r),r.username=Tt.call(r),r.password=It.call(r),r.host=Ot.call(r),r.hostname=jt.call(r),r.port=Et.call(r),r.pathname=Dt.call(r),r.search=zt.call(r),r.searchParams=Nt.call(r),r.hash=qt.call(r))},Bt=Rt.prototype,Ut=function(){var t=_(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",Q(t)&&(c+=n+(r?":"+r:"")+"@"),c+=V(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Pt=function(){var t=_(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(error){return"null"}return"file"!=e&&Y(t)?e+"://"+V(t.host)+(null!==n?":"+n:""):"null"},Lt=function(){return _(this).scheme+":"},Tt=function(){return _(this).username},It=function(){return _(this).password},Ot=function(){var t=_(this),e=t.host,n=t.port;return null===e?"":null===n?V(e):V(e)+":"+n},jt=function(){var t=_(this).host;return null===t?"":V(t)},Et=function(){var t=_(this).port;return null===t?"":String(t)},Dt=function(){var t=_(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},zt=function(){var t=_(this).query;return t?"?"+t:""},Nt=function(){return _(this).searchParams},qt=function(){var t=_(this).fragment;return t?"#"+t:""},Ft=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(Bt,{href:Ft(Ut,(function(t){var e=_(this),n=String(t),r=Mt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:Ft(Pt),protocol:Ft(Lt,(function(t){var e=_(this);Mt(e,String(t)+":",at)})),username:Ft(Tt,(function(t){var e=_(this),n=p(String(t));if(!tt(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=G(n[r],X)}})),password:Ft(It,(function(t){var e=_(this),n=p(String(t));if(!tt(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=G(n[r],X)}})),host:Ft(Ot,(function(t){var e=_(this);e.cannotBeABaseURL||Mt(e,String(t),vt)})),hostname:Ft(jt,(function(t){var e=_(this);e.cannotBeABaseURL||Mt(e,String(t),yt)})),port:Ft(Et,(function(t){var e=_(this);tt(e)||(t=String(t),""==t?e.port=null:Mt(e,t,mt))})),pathname:Ft(Dt,(function(t){var e=_(this);e.cannotBeABaseURL||(e.path=[],Mt(e,t+"",St))})),search:Ft(zt,(function(t){var e=_(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Mt(e,t,At)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Ft(Nt),hash:Ft(qt,(function(t){var e=_(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Mt(e,t,kt)):e.fragment=null}))}),c(Bt,"toJSON",(function(){return Ut.call(this)}),{enumerable:!0}),c(Bt,"toString",(function(){return Ut.call(this)}),{enumerable:!0}),w){var Wt=w.createObjectURL,$t=w.revokeObjectURL;Wt&&c(Rt,"createObjectURL",(function(t){return Wt.apply(w,arguments)})),$t&&c(Rt,"revokeObjectURL",(function(t){return $t.apply(w,arguments)}))}v(Rt,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Rt})},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,f,h,p,d=i(t),g="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=void 0!==y,w=c(d),b=0;if(m&&(y=r(y,v>2?arguments[2]:void 0,2)),void 0==w||g==Array&&a(w))for(e=s(d.length),n=new g(e);e>b;b++)p=m?y(d[b],b):d[b],u(n,b,p);else for(f=w.call(d),h=f.next,n=new g;!(l=h.call(f)).done;b++)p=m?o(f,y,[l.value,b],!0):l.value,u(n,b,p);return n.length=b,n}},"5fb2":function(t,e,n){"use strict";var r=2147483647,i=36,o=1,a=26,s=38,u=700,c=72,l=128,f="-",h=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",g=i-o,v=Math.floor,y=String.fromCharCode,m=function(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},w=function(t){return t+22+75*(t<26)},b=function(t,e,n){var r=0;for(t=n?v(t/u):t>>1,t+=v(t/e);t>g*a>>1;r+=i)t=v(t/g);return v(r+(g+1)*t/(t+s))},x=function(t){var e=[];t=m(t);var n,s,u=t.length,h=l,p=0,g=c;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(y(s));var x=e.length,S=x;x&&e.push(f);while(S<u){var _=r;for(n=0;n<t.length;n++)s=t[n],s>=h&&s<_&&(_=s);var C=S+1;if(_-h>v((r-p)/C))throw RangeError(d);for(p+=(_-h)*C,h=_,n=0;n<t.length;n++){if(s=t[n],s<h&&++p>r)throw RangeError(d);if(s==h){for(var A=p,k=i;;k+=i){var M=k<=g?o:k>=g+a?a:k-g;if(A<M)break;var R=A-M,B=i-M;e.push(y(w(M+R%B))),A=v(R/B)}e.push(y(w(A))),g=b(p,C,S==x),p=0,++S}}++p,++h}return e.join("")};t.exports=function(t){var e,n,r=[],i=t.toLowerCase().replace(p,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(h.test(n)?"xn--"+x(n):n);return r.join(".")}},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},9861:function(t,e,n){"use strict";n("e260");var r=n("23e7"),i=n("d066"),o=n("0d3b"),a=n("6eeb"),s=n("e2cc"),u=n("d44e"),c=n("9ed3"),l=n("69f3"),f=n("19aa"),h=n("5135"),p=n("0366"),d=n("f5df"),g=n("825a"),v=n("861d"),y=n("7c73"),m=n("5c6c"),w=n("9a1f"),b=n("35a1"),x=n("b622"),S=i("fetch"),_=i("Headers"),C=x("iterator"),A="URLSearchParams",k=A+"Iterator",M=l.set,R=l.getterFor(A),B=l.getterFor(k),U=/\+/g,P=Array(4),L=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},T=function(t){try{return decodeURIComponent(t)}catch(error){return t}},I=function(t){var e=t.replace(U," "),n=4;try{return decodeURIComponent(e)}catch(error){while(n)e=e.replace(L(n--),T);return e}},O=/[!'()~]|%20/g,j={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},E=function(t){return j[t]},D=function(t){return encodeURIComponent(t).replace(O,E)},z=function(t,e){if(e){var n,r,i=e.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),t.push({key:I(r.shift()),value:I(r.join("="))}))}},N=function(t){this.entries.length=0,z(this.entries,t)},q=function(t,e){if(t<e)throw TypeError("Not enough arguments")},F=c((function(t,e){M(this,{type:k,iterator:w(R(t).entries),kind:e})}),"Iterator",(function(){var t=B(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),W=function(){f(this,W,A);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(M(l,{type:A,entries:p,updateURL:function(){},updateSearchParams:N}),void 0!==c)if(v(c))if(t=b(c),"function"===typeof t){e=t.call(c),n=e.next;while(!(r=n.call(e)).done){if(i=w(g(r.value)),o=i.next,(a=o.call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}}else for(u in c)h(c,u)&&p.push({key:u,value:c[u]+""});else z(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},$=W.prototype;s($,{append:function(t,e){q(arguments.length,2);var n=R(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){q(arguments.length,1);var e=R(this),n=e.entries,r=t+"",i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){q(arguments.length,1);for(var e=R(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){q(arguments.length,1);for(var e=R(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){q(arguments.length,1);var e=R(this).entries,n=t+"",r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){q(arguments.length,1);for(var n,r=R(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)n=i[u],n.key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=R(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){var e,n=R(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),a($,C,$.entries),a($,"toString",(function(){var t,e=R(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push(D(t.key)+"="+D(t.value));return n.join("&")}),{enumerable:!0}),u(W,A),r({global:!0,forced:!o},{URLSearchParams:W}),o||"function"!=typeof S||"function"!=typeof _||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],v(e)&&(n=e.body,d(n)===A&&(r=e.headers?new _(e.headers):new _,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:m(0,String(n)),headers:m(0,r)}))),i.push(e)),S.apply(this,i)}}),t.exports={URLSearchParams:W,getState:R}},"9a1f":function(t,e,n){var r=n("825a"),i=n("35a1");t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},ad9a:function(t,e,n){
/*!
 * 
 * js-audio-recorder - js audio recorder plugin
 * 
 * @version v1.0.6
 * @homepage https://github.com/2fps/recorder
 * @author 2fps <echoweb@126.com> (https://www.zhuyuntao.cn)
 * @license MIT
 *         
 */
!function(e,n){t.exports=n()}(0,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}Object.defineProperty(e,"__esModule",{value:!0}),e.compress=function(t,e,n){for(var r=e/n,i=Math.max(r,1),o=t.left,a=t.right,s=Math.floor((o.length+a.length)/r),u=new Float32Array(s),c=0,l=0;c<s;){var f=Math.floor(l);u[c]=o[f],c++,a.length&&(u[c]=a[f],c++),l+=i}return u},e.encodePCM=function(t,e,n){void 0===n&&(n=!0);var r=0,i=t.length*(e/8),o=new ArrayBuffer(i),a=new DataView(o);if(8===e)for(var s=0;s<t.length;s++,r++){var u=(c=Math.max(-1,Math.min(1,t[s])))<0?128*c:127*c;u=+u+128,a.setInt8(r,u)}else for(s=0;s<t.length;s++,r+=2){var c=Math.max(-1,Math.min(1,t[s]));a.setInt16(r,c<0?32768*c:32767*c,n)}return a},e.encodeWAV=function(t,e,n,i,o,a){void 0===a&&(a=!0);var s=n>e?e:n,u=o,c=new ArrayBuffer(44+t.byteLength),l=new DataView(c),f=i,h=0;r(l,h,"RIFF"),h+=4,l.setUint32(h,36+t.byteLength,a),r(l,h+=4,"WAVE"),r(l,h+=4,"fmt "),h+=4,l.setUint32(h,16,a),h+=4,l.setUint16(h,1,a),h+=2,l.setUint16(h,f,a),h+=2,l.setUint32(h,s,a),h+=4,l.setUint32(h,f*s*(u/8),a),h+=4,l.setUint16(h,f*(u/8),a),h+=2,l.setUint16(h,u,a),r(l,h+=2,"data"),h+=4,l.setUint32(h,t.byteLength,a),h+=4;for(var p=0;p<t.byteLength;)l.setUint8(h,t.getUint8(p)),h++,p++;return l}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=n(0),s=n(3),u=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.isrecording=!1,n.ispause=!1,n.isplaying=!1,n}return i(e,t),e.prototype.setOption=function(t){void 0===t&&(t={}),this.setNewOption(t)},e.prototype.start=function(){return this.isrecording?Promise.reject():(this.isrecording=!0,this.startRecord())},e.prototype.pause=function(){this.isrecording&&!this.ispause&&(this.ispause=!0,this.pauseRecord())},e.prototype.resume=function(){this.isrecording&&this.ispause&&(this.ispause=!1,this.resumeRecord())},e.prototype.stop=function(){this.isrecording&&(this.isrecording=!1,this.ispause=!1,this.stopRecord())},e.prototype.play=function(){this.stop(),this.isplaying=!0,this.onplay&&this.onplay(),s.default.addPlayEnd(this.onplayend);var t=this.getWAV();t.byteLength>44&&s.default.play(t.buffer)},e.prototype.getPlayTime=function(){return s.default.getPlayTime()},e.prototype.pausePlay=function(){!this.isrecording&&this.isplaying&&(this.isplaying=!1,this.onpauseplay&&this.onpauseplay(),s.default.pausePlay())},e.prototype.resumePlay=function(){this.isrecording||this.isplaying||(this.isplaying=!0,this.onresumeplay&&this.onresumeplay(),s.default.resumePlay())},e.prototype.stopPlay=function(){this.isrecording||(this.isplaying=!1,this.onstopplay&&this.onstopplay(),s.default.stopPlay())},e.prototype.destroy=function(){return s.default.destroyPlay(),this.destroyRecord()},e.prototype.getRecordAnalyseData=function(){return this.getAnalyseData()},e.prototype.getPlayAnalyseData=function(){return s.default.getAnalyseData()},e.prototype.getPCM=function(){this.stop();var t=this.getData();return t=a.compress(t,this.inputSampleRate,this.outputSampleRate),a.encodePCM(t,this.oututSampleBits,this.littleEdian)},e.prototype.getPCMBlob=function(){return new Blob([this.getPCM()])},e.prototype.downloadPCM=function(t){void 0===t&&(t="recorder");var e=this.getPCMBlob();o.downloadPCM(e,t)},e.prototype.getWAV=function(){var t=this.getPCM();return a.encodeWAV(t,this.inputSampleRate,this.outputSampleRate,this.config.numChannels,this.oututSampleBits,this.littleEdian)},e.prototype.getWAVBlob=function(){return new Blob([this.getWAV()],{type:"audio/wav"})},e.prototype.downloadWAV=function(t){void 0===t&&(t="recorder");var e=this.getWAVBlob();o.downloadWAV(e,t)},e.prototype.download=function(t,e,n){o.download(t,e,n)},e.prototype.getChannelData=function(){var t=this.getPCM(),e=t.byteLength,n=this.littleEdian,r={left:null,right:null};if(2===this.config.numChannels){var i=new DataView(new ArrayBuffer(e/2)),o=new DataView(new ArrayBuffer(e/2));if(16===this.config.sampleBits)for(var a=0;a<e/2;a+=2)i.setInt16(a,t.getInt16(2*a,n),n),o.setInt16(a,t.getInt16(2*a+2,n),n);else for(a=0;a<e/2;a+=2)i.setInt8(a,t.getInt8(2*a)),o.setInt8(a,t.getInt8(2*a+1));r.left=i,r.right=o}else r.left=t;return r},e}(n(5).default);e.default=u},function(t,e,n){"use strict";function r(t,e,n){var r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download=e+"."+n,r.click()}Object.defineProperty(e,"__esModule",{value:!0}),e.downloadWAV=function(t,e){void 0===e&&(e="recorder"),r(t,e,"wav")},e.downloadPCM=function(t,e){void 0===e&&(e="recorder"),r(t,e,"pcm")},e.download=function(t,e,n){return r(t,e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=null,o=0,a=0,s=null,u=null,c=null,l=!1,f=0,h=function(){};function p(){return l=!1,s.decodeAudioData(c.slice(0),(function(t){(i=s.createBufferSource()).onended=function(){l||(f=s.currentTime-a+o,h())},i.buffer=t,i.connect(u),u.connect(s.destination),i.start(0,o),a=s.currentTime}),(function(t){r.throwError(t)}))}function d(){i&&(i.stop(),i=null)}var g=function(){function t(){}return t.play=function(t){return s||(s=new(window.AudioContext||window.webkitAudioContext),(u=s.createAnalyser()).fftSize=2048),this.stopPlay(),c=t,f=0,p()},t.pausePlay=function(){d(),o+=s.currentTime-a,l=!0},t.resumePlay=function(){return p()},t.stopPlay=function(){o=0,c=null,d()},t.destroyPlay=function(){this.stopPlay()},t.getAnalyseData=function(){var t=new Uint8Array(u.frequencyBinCount);return u.getByteTimeDomainData(t),t},t.addPlayEnd=function(t){void 0===t&&(t=function(){}),h=t},t.getPlayTime=function(){var t=l?o:s.currentTime-a+o;return f||t},t}();e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=function(t){throw new Error(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(e){void 0===e&&(e={}),this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCM=[],this.inputSampleBits=16,this.fileSize=0,this.duration=0,this.needRecord=!0;var n,r=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=r.sampleRate,this.setNewOption(e),this.littleEdian=(n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),256===new Int16Array(n)[0]),t.initUserMedia()}return t.prototype.setNewOption=function(t){void 0===t&&(t={}),this.config={sampleBits:~[8,16].indexOf(t.sampleBits)?t.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(t.sampleRate)?t.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(t.numChannels)?t.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits},t.prototype.startRecord=function(){var t=this;return this.context&&this.destroyRecord(),this.initRecorder(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.audioInput=t.context.createMediaStreamSource(e),t.stream=e})).then((function(){t.audioInput.connect(t.analyser),t.analyser.connect(t.recorder),t.recorder.connect(t.context.destination)}))},t.prototype.pauseRecord=function(){this.needRecord=!1},t.prototype.resumeRecord=function(){this.needRecord=!0},t.prototype.stopRecord=function(){this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect()},t.prototype.destroyRecord=function(){return this.clearRecordStatus(),this.stopStream(),this.closeAudioContext()},t.prototype.getAnalyseData=function(){var t=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteTimeDomainData(t),t},t.prototype.getData=function(){return this.flat()},t.prototype.clearRecordStatus=function(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0},t.prototype.flat=function(){var t=null,e=new Float32Array(0);1===this.config.numChannels?t=new Float32Array(this.size):(t=new Float32Array(this.size/2),e=new Float32Array(this.size/2));for(var n=0,r=0;r<this.lBuffer.length;r++)t.set(this.lBuffer[r],n),n+=this.lBuffer[r].length;for(n=0,r=0;r<this.rBuffer.length;r++)e.set(this.rBuffer[r],n),n+=this.rBuffer[r].length;return{left:t,right:e}},t.prototype.initRecorder=function(){var t=this;this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;var e=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=e.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=function(e){if(t.needRecord){var n,r=e.inputBuffer.getChannelData(0),i=null;t.lBuffer.push(new Float32Array(r)),t.size+=r.length,2===t.config.numChannels&&(i=e.inputBuffer.getChannelData(1),t.rBuffer.push(new Float32Array(i)),t.size+=i.length),t.fileSize=Math.floor(t.size/Math.max(t.inputSampleRate/t.outputSampleRate,1))*(t.oututSampleBits/8),n=100*Math.max.apply(Math,r),t.duration+=4096/t.inputSampleRate,t.onprocess&&t.onprocess(t.duration),t.onprogress&&t.onprogress({duration:t.duration,fileSize:t.fileSize,vol:n})}}},t.prototype.stopStream=function(){this.stream&&this.stream.getTracks&&(this.stream.getTracks().forEach((function(t){return t.stop()})),this.stream=null)},t.prototype.closeAudioContext=function(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise((function(t){t()}))},t.initUserMedia=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise((function(n,r){e.call(navigator,t,n,r)})):Promise.reject(new Error("浏览器不支持 getUserMedia !"))})},t.prototype.transformIntoPCM=function(t,e){var n=new Float32Array(t),i=new Float32Array(e),o=r.compress({left:n,right:i},this.inputSampleRate,this.outputSampleRate);return r.encodePCM(o,this.oututSampleBits,this.littleEdian)},t.getPermission=function(){return this.initUserMedia(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){t.getTracks().forEach((function(t){return t.stop()}))}))},t}();e.default=i}]).default}))},da43:function(t,e,n){t.exports=n("ad9a")}}]);